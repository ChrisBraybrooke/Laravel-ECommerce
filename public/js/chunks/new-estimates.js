webpackJsonp([22],{"+hWg":function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=a(t("nCXa")),o=a(t("GzQy"));function a(e){return e&&e.__esModule?e:{default:e}}r.default={name:"NewEstimate",components:{ProductForm:function(){return t.e(35).then(t.bind(null,"mBvu"))},ProductTable:function(){return t.e(34).then(t.bind(null,"tAls"))},AddressForm:function(){return t.e(36).then(t.bind(null,"G1R4"))},Errors:function(){return t.e(29).then(t.bind(null,"DqGP"))}},data:function(){return{loading:!1,errors:{},order:{status:"Estimate",customer:{},shipping_rate:60,discount_rate:0,billing_address:{},shipping_address:{},items:[],cart:{},use_billing_for_shipping:!1,needs_address:"No Address"}}},computed:{orderTotals:function(){return s.default.totals(this.order.items,this.order.shipping_rate,this.order.discount_rate)}},mounted:function(){},methods:{addProductToTable:function(e){this.order.items.push(e)},processSubmit:function(){var e=this;this.loading=!0,this.errors={},o.default.persist("post",{path:"orders",object:this.order}).then(function(r){e.loading=!1,e.$router.push({name:"orders.view",params:{orderId:r.data.id.toString()}})}).catch(function(r){e.loading=!1,e.errors=r})}}}},"3OGr":function(e,r,t){var s=t("VU/8")(t("+hWg"),t("Mo6f"),!1,function(e){t("RZzL")},null,null);e.exports=s.exports},Mo6f:function(e,r){e.exports={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("el-breadcrumb",{staticClass:"breadcrumbs",attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{name:"estimates"}}},[e._v("Estimates")]),e._v(" "),t("el-breadcrumb-item",[e._v("New Estimate")])],1),e._v(" "),t("el-row",{attrs:{align:"middle",type:"flex"}},[t("el-col",{attrs:{span:12}},[t("h1",{staticClass:"page_title"},[e._v("New Estimate")])])],1),e._v(" "),t("hr",{staticClass:"page_hr"}),e._v(" "),Object.keys(e.errors).length>0?t("errors",{attrs:{errors:e.errors}}):e._e(),e._v(" "),t("el-form",{ref:"orderForm",attrs:{"label-position":"top",model:e.order},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{md:{span:8,offset:4}}},[t("el-form-item",{attrs:{label:"Customer First Name",size:"small",prop:"customer.first_name"}},[t("el-input",{attrs:{autofocus:!0,"auto-complete":"off"},model:{value:e.order.customer.first_name,callback:function(r){e.$set(e.order.customer,"first_name",r)},expression:"order.customer.first_name"}})],1)],1),e._v(" "),t("el-col",{attrs:{md:8}},[t("el-form-item",{attrs:{label:"Customer Last Name",size:"small",prop:"customer.last_name"}},[t("el-input",{attrs:{autofocus:!0,"auto-complete":"off"},model:{value:e.order.customer.last_name,callback:function(r){e.$set(e.order.customer,"last_name",r)},expression:"order.customer.last_name"}})],1)],1)],1),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{md:{span:8,offset:4}}},[t("el-form-item",{attrs:{label:"Customer Phone",size:"small",prop:"customer.phone"}},[t("el-input",{attrs:{autofocus:!0,"auto-complete":"off"},model:{value:e.order.customer.phone,callback:function(r){e.$set(e.order.customer,"phone",r)},expression:"order.customer.phone"}})],1)],1),e._v(" "),t("el-col",{attrs:{md:8}},[t("el-form-item",{attrs:{label:"Customer Email",size:"small",prop:"customer.email"}},[t("el-input",{attrs:{autofocus:!0,"auto-complete":"off"},model:{value:e.order.customer.email,callback:function(r){e.$set(e.order.customer,"email",r)},expression:"order.customer.email"}})],1)],1)],1),e._v(" "),t("hr"),e._v(" "),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{md:{span:24}}},[t("el-form-item",{attrs:{label:"Address",size:"small",prop:"needs_address"}},[t("div",[t("el-radio-group",{attrs:{size:"small"},model:{value:e.order.needs_address,callback:function(r){e.$set(e.order,"needs_address",r)},expression:"order.needs_address"}},[t("el-radio-button",{attrs:{label:"Needs Address"}}),e._v(" "),t("el-radio-button",{attrs:{label:"No Address"}})],1)],1)])],1)],1),e._v(" "),"Needs Address"===e.order.needs_address?t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{md:12}},[t("h5",[e._v("Billing Adress")]),e._v(" "),t("address-form",{attrs:{form:e.order.billing_address,prop:"billing_address"}})],1),e._v(" "),t("el-col",{attrs:{md:12}},[t("h5",[e._v("Billing Adress")]),e._v(" "),t("el-col",{attrs:{md:{span:24}}},[t("el-checkbox",{model:{value:e.order.use_billing_for_shipping,callback:function(r){e.$set(e.order,"use_billing_for_shipping",r)},expression:"order.use_billing_for_shipping"}},[e._v("Same As Billing Address")])],1),e._v(" "),e.order.use_billing_for_shipping?e._e():t("address-form",{attrs:{form:e.order.shipping_address,prop:"shipping_address"}})],1)],1):e._e()],1),e._v(" "),t("el-row",{staticStyle:{"margin-top":"20px","margin-bottom":"20px"},attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("product-form",{attrs:{"on-product-add":e.addProductToTable}})],1)],1),e._v(" "),e.order.items?t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("product-table",{attrs:{editable:!0,order:e.order,"order-totals":e.orderTotals}})],1)],1):e._e(),e._v(" "),t("el-row",{staticStyle:{"margin-top":"40px"},attrs:{gutter:20}},[t("el-col",{attrs:{md:{span:24}}},[t("el-button",{attrs:{type:"primary"},on:{click:function(r){e.processSubmit()}}},[e._v("Create Estimate")])],1)],1)],1)},staticRenderFns:[]}},RZzL:function(e,r,t){var s=t("SpcX");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);t("rjj0")("21b8e62e",s,!0,{})},SpcX:function(e,r,t){(e.exports=t("FZ+f")(!1)).push([e.i,"",""])}});