webpackJsonp([24],{"+hWg":function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=s(e("nCXa")),n=s(e("GzQy"));function s(t){return t&&t.__esModule?t:{default:t}}r.default={name:"NewEstimate",components:{ProductForm:function(){return e.e(36).then(e.bind(null,"mBvu"))},ProductTable:function(){return e.e(35).then(e.bind(null,"tAls"))},AddressForm:function(){return e.e(37).then(e.bind(null,"G1R4"))},Errors:function(){return e.e(31).then(e.bind(null,"DqGP"))},CustomerInformationForm:function(){return e.e(41).then(e.bind(null,"jTxB"))}},props:{isProForma:{type:Boolean,required:!1,default:function(){return!1}}},data:function(){return{loading:!1,errors:{},order:{status:null,customer:{},shipping_rate:60,discount_rate:0,billing_address:{},shipping_address:{},items:[],cart:{totals:{Shipping:60,Discount:0}},use_billing_for_shipping:!1,needs_address:"No Address"}}},computed:{orderTotals:function(){return o.default.totals(this.order.items,this.order.cart.totals.Shipping,this.order.cart.totals.Discount)},documentName:function(){return this.isProForma?"Pro-Forma":"Estimate"}},mounted:function(){this.order.status=this.documentName},methods:{addProductToTable:function(t){this.order.items.push(t)},processSubmit:function(){var t=this;this.loading=!0,this.errors={},n.default.persist("post",{path:"orders",object:this.order}).then(function(r){t.loading=!1,t.$router.push({name:"orders.view",params:{orderId:r.data.id.toString()}})}).catch(function(r){t.loading=!1,t.errors=r})}}}},"3OGr":function(t,r,e){var o=e("VU/8")(e("+hWg"),e("KpVq"),!1,function(t){e("QFrS")},null,null);t.exports=o.exports},KpVq:function(t,r){t.exports={render:function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[e("el-breadcrumb",{staticClass:"breadcrumbs",attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{name:"estimates"}}},[t._v("Estimates")]),t._v(" "),e("el-breadcrumb-item",[t._v("New "+t._s(t.documentName))])],1),t._v(" "),e("el-row",{attrs:{align:"middle",type:"flex"}},[e("el-col",{attrs:{span:12}},[e("h1",{staticClass:"page_title"},[t._v("New "+t._s(t.documentName))])])],1),t._v(" "),e("hr",{staticClass:"page_hr"}),t._v(" "),Object.keys(t.errors).length>0?e("errors",{attrs:{errors:t.errors}}):t._e(),t._v(" "),e("el-form",{ref:"orderForm",attrs:{model:t.order,"label-position":"top"},nativeOn:{submit:function(t){t.preventDefault()}}},[e("customer-information-form",{attrs:{form:t.order}})],1),t._v(" "),e("el-row",{staticStyle:{"margin-top":"20px","margin-bottom":"20px"},attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("product-form",{attrs:{"on-product-add":t.addProductToTable}})],1)],1),t._v(" "),t.order.items?e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("product-table",{attrs:{editable:!0,order:t.order,"order-totals":t.orderTotals}})],1)],1):t._e(),t._v(" "),e("el-row",{staticStyle:{"margin-top":"40px"},attrs:{gutter:20}},[e("el-col",{attrs:{md:{span:24}}},[e("el-button",{attrs:{type:"primary"},on:{click:function(r){t.processSubmit()}}},[t._v("Create "+t._s(t.documentName))])],1)],1)],1)},staticRenderFns:[]}},QFrS:function(t,r,e){var o=e("T2qj");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);e("rjj0")("61c69a66",o,!0,{})},T2qj:function(t,r,e){(t.exports=e("FZ+f")(!1)).push([t.i,"",""])}});