webpackJsonp([23],{EUpe:function(t,e,r){(t.exports=r("FZ+f")(!1)).push([t.i,"",""])},GTl6:function(t,e,r){var n=r("EUpe");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);r("rjj0")("25cbb45e",n,!0,{})},gryR:function(t,e,r){var n=r("VU/8")(r("ycWh"),r("lR0N"),!1,function(t){r("GTl6")},null,null);t.exports=n.exports},lR0N:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[r("el-breadcrumb",{staticClass:"breadcrumbs",attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{name:"estimates"}}},[t._v("Estimates")]),t._v(" "),t.estimate.id?r("el-breadcrumb-item",[t._v(t._s(t.estimate.ref))]):t._e()],1),t._v(" "),r("print-download-button",{attrs:{"order-id":t.estimateId}}),t._v(" "),r("router-link",{attrs:{to:{name:"orders.view",params:{orderId:""+t.estimate.id}}}},[r("el-button",{attrs:{type:"info",size:"mini"}},[t._v("Edit Order")])],1),t._v(" "),Object.keys(t.errors).length>0?r("errors",{attrs:{errors:t.errors}}):t._e(),t._v(" "),r("el-row",{staticStyle:{"margin-bottom":"20px","margin-top":"20px"},attrs:{gutter:20}},[r("el-col",{attrs:{sm:24}},[r("new-product-form",{attrs:{"on-product-add":t.onProductAdd}})],1)],1),t._v(" "),r("el-row",{staticStyle:{"margin-bottom":"20px","margin-top":"20px"},attrs:{gutter:20}},[r("el-col",{attrs:{sm:24}},[r("product-table",{attrs:{editable:!0,order:t.estimate,"order-totals":t.orderTotals,"on-product-update":t.handleProductUpdate}})],1)],1),t._v(" "),r("hr",{staticClass:"page_hr"}),t._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{sm:24}},[r("el-button",{attrs:{loading:t.loading,plain:"",type:"success"},on:{click:function(e){return t.updateEstimate()}}},[t._v("Save")])],1)],1)],1)},staticRenderFns:[]}},ycWh:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("GzQy"),a=r("nCXa");function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}e.default={name:"ViewEstimate",components:{Errors:function(){return r.e(31).then(r.bind(null,"DqGP"))},ProductTable:function(){return r.e(35).then(r.bind(null,"tAls"))},NewProductForm:function(){return r.e(36).then(r.bind(null,"vseG"))},PrintDownloadButton:function(){return r.e(49).then(r.bind(null,"d1Qw"))}},props:{estimateId:{required:!0,type:[String,Number]}},data:function(){return{loading:!1,estimate:{},errors:{}}},computed:{orderTotals:function(){return this.estimate.cart?a.a.totals(this.estimate.items,this.estimate.cart.totals.Shipping,this.estimate.cart.totals.Discount):[{}]}},watch:{},mounted:function(){this.getEstimate()},methods:{onProductAdd:function(t){this.estimate.items.push(t)},getEstimate:function(){var t=this;this.loading=!0,n.a.get({path:"orders/"+this.estimateId}).then(function(e){t.loading=!1,t.estimate=e.data}).catch(function(e){t.errors=e,t.loading=!1})},updateEstimate:function(){var t=this;this.loading=!0,n.a.persist("put",{path:"orders/"+this.estimateId,object:this.estimate}).then(function(e){t.loading=!1,t.estimate=e.data}).catch(function(e){t.errors=e,t.loading=!1})},handleProductUpdate:function(t){var e=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){i(t,e,r[e])})}return t}({},this.estimate.items[t.index],t.product);this.estimate.items.splice(t.index,1,e)}}}}});