webpackJsonp([23],{CpR0:function(t,e,r){(t.exports=r("FZ+f")(!1)).push([t.i,"",""])},MpRh:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(r("GzQy")),n=i(r("nCXa"));function i(t){return t&&t.__esModule?t:{default:t}}e.default={name:"ViewEstimate",components:{Errors:function(){return r.e(31).then(r.bind(null,"DqGP"))},ProductTable:function(){return r.e(35).then(r.bind(null,"tAls"))},ProductForm:function(){return r.e(36).then(r.bind(null,"mBvu"))},PrintDownloadButton:function(){return r.e(48).then(r.bind(null,"d1Qw"))}},props:{estimateId:{required:!0,type:[String,Number]}},data:function(){return{loading:!1,estimate:{},errors:{}}},computed:{orderTotals:function(){return this.estimate.cart?n.default.totals(this.estimate.items,this.estimate.cart.totals.Shipping,this.estimate.cart.totals.Discount):[{}]}},watch:{},mounted:function(){this.getEstimate()},methods:{onProductAdd:function(t){this.estimate.items.push(t)},getEstimate:function(){var t=this;this.loading=!0,a.default.get({path:"orders/"+this.estimateId}).then(function(e){t.loading=!1,t.estimate=e.data}).catch(function(e){t.errors=e,t.loading=!1})},updateEstimate:function(){var t=this;this.loading=!0,a.default.persist("put",{path:"orders/"+this.estimateId,object:this.estimate}).then(function(e){t.loading=!1,t.estimate=e.data}).catch(function(e){t.errors=e,t.loading=!1})}}}},gryR:function(t,e,r){var a=r("VU/8")(r("MpRh"),r("j0Ml"),!1,function(t){r("tb0W")},null,null);t.exports=a.exports},j0Ml:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[r("el-breadcrumb",{staticClass:"breadcrumbs",attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{name:"estimates"}}},[t._v("Estimates")]),t._v(" "),t.estimate.id?r("el-breadcrumb-item",[t._v(t._s(t.estimate.ref_number))]):t._e()],1),t._v(" "),r("print-download-button",{attrs:{"order-id":t.estimateId}}),t._v(" "),r("router-link",{attrs:{to:{name:"orders.view",params:{orderId:""+t.estimate.id}}}},[r("el-button",{attrs:{type:"info",size:"mini"}},[t._v("Edit Order")])],1),t._v(" "),Object.keys(t.errors).length>0?r("errors",{attrs:{errors:t.errors}}):t._e(),t._v(" "),r("el-row",{staticStyle:{"margin-bottom":"20px","margin-top":"20px"},attrs:{gutter:20}},[r("el-col",{attrs:{sm:24}},[r("product-form",{attrs:{"on-product-add":t.onProductAdd}})],1)],1),t._v(" "),r("el-row",{staticStyle:{"margin-bottom":"20px","margin-top":"20px"},attrs:{gutter:20}},[r("el-col",{attrs:{sm:24}},[r("product-table",{attrs:{editable:!0,order:t.estimate,"order-totals":t.orderTotals}})],1)],1),t._v(" "),r("hr",{staticClass:"page_hr"}),t._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{sm:24}},[r("el-button",{attrs:{loading:t.loading,plain:"",type:"success"},on:{click:function(e){t.updateEstimate()}}},[t._v("Save")])],1)],1)],1)},staticRenderFns:[]}},tb0W:function(t,e,r){var a=r("CpR0");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);r("rjj0")("cd9c1f5c",a,!0,{})}});