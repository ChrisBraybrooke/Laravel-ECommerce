webpackJsonp([34],{"5FLK":function(t,r){t.exports={render:function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[e("el-breadcrumb",{staticClass:"breadcrumbs",attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{name:"products"}}},[t._v("Products")]),t._v(" "),t.productForm.variant?e("el-breadcrumb-item",{attrs:{to:{name:"products.view.variants",params:{productId:t.productForm.variant.id.toString()},force:!0}}},[t._v(t._s(t.productForm.variant.name))]):t._e(),t._v(" "),e("el-breadcrumb-item",[t._v(t._s(t.productForm.name))])],1),t._v(" "),e("el-row",{attrs:{align:"middle",type:"flex"}},[e("el-col",{attrs:{span:12}},[e("h1",{staticClass:"page_title"},[t._v(t._s(t.productForm.name))])])],1),t._v(" "),e("page-layout",{attrs:{"page-errors":t.productErrors,"current-page":t.currentPage,pages:[{name:"Basic Information",index:"/products/"+t.productId},{name:"Pricing",index:"/products/"+t.productId+"/pricing"},{name:"Images",index:"/products/"+t.productId+"/images"},{name:"Customisations",index:"/products/"+t.productId+"/customisations"},{name:"Variants",index:"/products/"+t.productId+"/variants"},{name:"Order Information",index:"/products/"+t.productId+"/ordering"}]}},[e("template",{slot:"page_content"},[e("el-form",{ref:"productForm",attrs:{model:t.productForm,rules:t.formRules,"label-position":"top","label-width":"120px"}},[t._t("product_page",null,{productForm:t.productForm}),t._v(" "),e("hr",{staticClass:"page_hr"}),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{sm:24}},[e("el-form-item",[e("el-button",{attrs:{loading:t.loading,plain:"",type:"success"},on:{click:function(r){t.submitForm("productForm")}}},[t._v("Save")])],1)],1)],1)],2)],1)],2)],1)},staticRenderFns:[]}},"7Yaf":function(t,r,e){(t.exports=e("FZ+f")(!1)).push([t.i,".collection_type_select[data-v-230c6d27]{width:100%}.product_variant_card[data-v-230c6d27]{margin:30px 0}.product_variant_card.minimised .el-card__body[data-v-230c6d27]{padding:0!important}",""])},"98Ok":function(t,r,e){var o=e("VU/8")(e("naRC"),e("5FLK"),!1,function(t){e("iIBo")},"data-v-230c6d27",null);t.exports=o.exports},iIBo:function(t,r,e){var o=e("7Yaf");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);e("rjj0")("9cbd5d6a",o,!0,{})},naRC:function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,a=e("GzQy"),i=(o=a)&&o.__esModule?o:{default:o};r.default={name:"ProductPageLayout",components:{PageLayout:function(){return e.e(44).then(e.bind(null,"zrYK"))}},props:{productId:{type:String,required:!0},currentPage:{required:!0,type:String},form:{type:Object,required:!1,default:function(){return{}}},formLoaded:{type:Function,required:!1,default:function(){return function(t){}}},formRules:{type:Object,required:!1,default:function(){return{}}},requestWith:{type:Array,required:!1,default:function(){return[]}},requestIncludes:{type:Array,required:!1,default:function(){return[]}}},data:function(){return{productForm:this.form,productErrors:{},loading:!1}},computed:{},watch:{},mounted:function(){this.getProduct()},methods:{getProduct:function(){this.productErrors={},this.loading=!0,i.default.get({path:"products/"+this.productId,params:{with:this.requestWith.concat(["variant"]),include:this.requestIncludes}}).then(function(t){this.loading=!1,this.productForm=t.data,this.formLoaded(t.data)}.bind(this)).catch(function(t){this.loading=!1,this.productErrors=t}.bind(this))},submitForm:function(t){var r=this;this.productErrors={},this.loading=!0,this.productForm.with=this.requestWith.concat(["variant"]),this.productForm.include=this.requestIncludes,this.$refs[t].validate(function(t){if(!t)return r.loading=!1,!1;i.default.persist("put",{path:"products/"+r.productId,object:r.productForm}).then(function(t){this.loading=!1,this.productForm=t.data,this.$message({message:"Product updated",type:"success",showClose:!0})}.bind(r)).catch(function(t){this.loading=!1,this.productErrors=t}.bind(r))})}}}}});